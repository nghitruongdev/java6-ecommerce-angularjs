<!DOCTYPE html>
<html
        lang="en"
        th:replace="~{/layout/index::dynamic(~{::main})}">
<head>
    <meta charset="UTF-8"/>
    <title>Title</title>
</head>
<body>
<div th:fragment="main" class="mx-auto container">
    <h2 th:text="${category != null? category.name : ' All Products'}"></h2>
    <div></div>
    <div th:if="${hasContent}" class="row justify-content-around">
        <div class="col-auto mt-3" th:each="prod, stat: ${productPage.content}">
            <div th:replace="~{/product/product-card::product-card(${prod})}"></div>
        </div>
        <div class="d-flex justify-content-center mt-3">
            <nav aria-label="Page navigation example" class="mx-auto">
                <ul class="pagination pagination-lg">
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Previous"
                           th:classappend="${productPage.first? 'disabled': ''}"
                           th:href="@{?page=0}">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li th:classappend="${productPage.first? 'active': ''}"
                        class="page-item "><a class="page-link" href="#"
                                              th:href="@{|?page=${productPage.number - (productPage.first? 0: 1)}|}"
                                              th:text="${productPage.first? '1': productPage.number}">1</a></li>
                    <li th:if="${productPage.first != productPage.last}"
                        th:classappend="${productPage.first? '' : 'active'}"
                        class="page-item"><a class="page-link" href="#"
                                             th:href="@{|${productPage.first? '?page=' + (productPage.number + 1): '#'}|}"
                                             th:text="${productPage.first? '2': productPage.number + 1}">2</a></li>
                    <li th:if="${!productPage.last && productPage.number + 2 < productPage.totalPages}"
                        class="page-item"
                    ><a class="page-link" href="#" th:href="@{|?page=${productPage.number + 1}|}">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next"
                           th:href="@{|?page=${productPage.totalPages - 1}|}"
                           th:classappend="${productPage.last? 'disabled' : ''}"
                        >
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <p th:if="${!hasContent}">No Product Was Found</p>
<!--    <script th:inline="javascript">-->
<!--        console.log([[${productPage}]])-->
<!--    </script>-->
</div>
</body>
</html>
